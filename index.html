<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshShift - Schichtplaner</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <div class="logo">
                    <h1>FreshShift</h1>
                    <p>Schichtplaner für Fresh Fries</p>
                </div>
                
                <div class="login-form">
                    <div class="form-group">
                        <label for="employee-select">Mitarbeiter auswählen</label>
                        <select id="employee-select">
                            <option value="">-- Bitte wählen --</option>
                        </select>
                    </div>
                    
                    <button id="login-btn" class="btn btn-primary">Weiter</button>
                    
                    <div class="admin-link">
                        <button id="admin-login-btn" class="btn btn-secondary">Admin-Bereich</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Availability Form Screen -->
        <div id="availability-screen" class="screen">
            <header class="app-header">
                <button id="back-to-login" class="btn-icon">← Zurück</button>
                <h2>Mein Bereich</h2>
                <span id="current-user-name" class="user-badge"></span>
            </header>
            
            <div class="container">
                <!-- Quick Actions for Employee -->
                <div class="quick-actions">
                    <button id="report-late-btn" class="btn btn-warning">
                        Ich komme zu spät
                    </button>
                </div>
                
                <div class="section-tabs">
                    <button class="section-tab active" data-section="availability">Verfügbarkeit</button>
                    <button class="section-tab" data-section="my-schedule">Mein Plan</button>
                </div>
                
                <!-- Availability Section -->
                <div id="availability-section" class="section-content active">
                    <div class="week-selector">
                        <button id="prev-week" class="btn-icon">←</button>
                        <span id="week-display">KW 1</span>
                        <button id="next-week" class="btn-icon">→</button>
                    </div>
                    
                    <form id="availability-form">
                        <div class="days-container">
                            <!-- Days will be generated by JavaScript -->
                        </div>
                        
                        <div class="form-group notes-group">
                            <label for="general-notes">Allgemeine Bemerkungen</label>
                            <textarea id="general-notes" placeholder="z.B. 'Ab dem 22.12. wie Maria'"></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-large btn-full">Verfügbarkeit speichern</button>
                    </form>
                </div>
                
                <!-- My Schedule Section -->
                <div id="my-schedule-section" class="section-content">
                    <div class="week-selector">
                        <button id="my-prev-week" class="btn-icon">←</button>
                        <span id="my-week-display">KW 1</span>
                        <button id="my-next-week" class="btn-icon">→</button>
                    </div>
                    
                    <div id="schedule-status" class="schedule-status"></div>
                    <div id="my-schedule-content" class="my-schedule-content"></div>
                    <div id="weekly-summary" class="weekly-summary"></div>
                </div>
            </div>
        </div>

        <!-- Admin Screen -->
        <div id="admin-screen" class="screen">
            <header class="app-header">
                <button id="admin-back-to-login" class="btn-icon">← Zurück</button>
                <h2>Admin</h2>
                <div class="header-actions">
                    <div id="notification-badge" class="notification-badge" style="display:none;">
                        <span id="notification-count">0</span>
                    </div>
                </div>
            </header>
            
            <div class="container">
                <!-- Notifications Panel -->
                <div id="notifications-panel" class="notifications-panel" style="display:none;">
                    <h4>Neue Meldungen</h4>
                    <div id="notifications-list"></div>
                    <button id="clear-notifications" class="btn btn-small btn-secondary">Alle gelesen</button>
                </div>
                
                <div class="admin-tabs">
                    <button class="tab-btn active" data-tab="planner">Wochenplan</button>
                    <button class="tab-btn" data-tab="month">Monatsübersicht</button>
                    <button class="tab-btn" data-tab="employees">Mitarbeiter</button>
                </div>

                <!-- Planner Tab -->
                <div id="planner-tab" class="tab-content active">
                    <div class="week-selector">
                        <button id="admin-prev-week" class="btn-icon">←</button>
                        <span id="admin-week-display">KW 1</span>
                        <button id="admin-next-week" class="btn-icon">→</button>
                    </div>

                    <div class="admin-layout">
                        <!-- Left: Availability Overview -->
                        <div class="admin-panel availability-panel">
                            <h3>Wer kann wann?</h3>
                            <div class="availability-overview">
                                <table id="availability-table" class="overview-table"></table>
                            </div>
                        </div>
                        
                        <!-- Right: Schedule Editor -->
                        <div class="admin-panel schedule-panel">
                            <div class="panel-header">
                                <h3>Wochenplan</h3>
                                <div class="panel-actions">
                                    <button id="save-schedule" class="btn btn-primary btn-small">Speichern</button>
                                    <button id="release-schedule" class="btn btn-success btn-small" disabled>Freigeben</button>
                                </div>
                            </div>
                            <div class="schedule-editor">
                                <table id="schedule-table" class="schedule-table"></table>
                            </div>
                            <p class="editor-hint">Klicke auf eine Zelle um Schicht einzutragen. Grün = geplant, Rot = Abweichung</p>
                        </div>
                    </div>
                    
                    <!-- Week Summary -->
                    <div class="week-summary-panel">
                        <h4>Wochenübersicht</h4>
                        <div id="week-deviations" class="deviations-list"></div>
                    </div>
                </div>
                
                <!-- Month Tab -->
                <div id="month-tab" class="tab-content">
                    <div class="month-selector">
                        <button id="prev-month" class="btn-icon">←</button>
                        <span id="month-display">Januar 2025</span>
                        <button id="next-month" class="btn-icon">→</button>
                    </div>
                    
                    <div class="month-overview">
                        <table id="month-table" class="month-table">
                            <thead>
                                <tr>
                                    <th>Mitarbeiter</th>
                                    <th>Geplante Std.</th>
                                    <th>Tatsächliche Std.</th>
                                    <th>Differenz</th>
                                    <th>Verspätungen</th>
                                    <th>Früher gegangen</th>
                                </tr>
                            </thead>
                            <tbody id="month-table-body"></tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Employees Tab -->
                <div id="employees-tab" class="tab-content">
                    <div class="employees-header">
                        <h3>Mitarbeiter</h3>
                        <button id="add-employee-btn" class="btn btn-primary btn-small">+ Neu</button>
                    </div>
                    <div id="employees-list" class="employees-list-admin"></div>
                </div>
            </div>
        </div>
        
        <!-- Report Late Modal (Employee) -->
        <div id="late-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Verspätung melden</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p class="modal-info">Deine Meldung wird sofort an die Geschäftsleitung gesendet.</p>
                    
                    <div class="form-group">
                        <label for="late-minutes">Wie viel Minuten später?</label>
                        <select id="late-minutes">
                            <option value="5">5 Minuten</option>
                            <option value="10">10 Minuten</option>
                            <option value="15" selected>15 Minuten</option>
                            <option value="20">20 Minuten</option>
                            <option value="30">30 Minuten</option>
                            <option value="45">45 Minuten</option>
                            <option value="60">1 Stunde</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="late-reason">Grund (optional)</label>
                        <input type="text" id="late-reason" placeholder="z.B. Bahn ausgefallen">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-cancel">Abbrechen</button>
                    <button class="btn btn-warning" id="submit-late">Meldung senden</button>
                </div>
            </div>
        </div>
        
        <!-- Shift Modal (Admin) -->
        <div id="shift-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Schicht bearbeiten</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="modal-day-info" class="modal-day-info"></div>
                    
                    <div class="available-employees">
                        <h4>Verfügbarkeit:</h4>
                        <div id="available-list"></div>
                    </div>
                    
                    <div class="shift-times">
                        <h4>Schichtzeiten:</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="shift-start">Geplant von</label>
                                <input type="time" id="shift-start" value="10:00">
                            </div>
                            <div class="form-group">
                                <label for="shift-end">Geplant bis</label>
                                <input type="time" id="shift-end" value="20:00">
                            </div>
                        </div>
                        
                        <div class="actual-times">
                            <h4>Tatsächliche Zeiten (falls abweichend):</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="actual-start">Tatsächlich von</label>
                                    <input type="time" id="actual-start">
                                </div>
                                <div class="form-group">
                                    <label for="actual-end">Tatsächlich bis</label>
                                    <input type="time" id="actual-end">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="deviation-note">Bemerkung</label>
                                <input type="text" id="deviation-note" placeholder="z.B. 'Früher gegangen, nichts los'">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-cancel">Abbrechen</button>
                    <button class="btn btn-danger" id="remove-shift" style="display:none;">Entfernen</button>
                    <button class="btn btn-primary" id="save-shift">Speichern</button>
                </div>
            </div>
        </div>
        
        <!-- Add Employee Modal -->
        <div id="add-employee-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Neuer Mitarbeiter</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="new-emp-name">Name</label>
                        <input type="text" id="new-emp-name" placeholder="Name eingeben">
                    </div>
                    <div class="form-group">
                        <label for="new-emp-type">Typ</label>
                        <select id="new-emp-type">
                            <option value="aushilfe">Aushilfe (max. 18h/Woche)</option>
                            <option value="festangestellt">Festangestellt</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-cancel">Abbrechen</button>
                    <button class="btn btn-primary" id="save-new-employee">Hinzufügen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
